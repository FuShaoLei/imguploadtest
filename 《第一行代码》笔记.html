<!DOCTYPE html>

<head>
    <meta charset="UTF-8">
    <style type="text/css">
        article,
        footer,
        header,
        menu,
        nav,
        section {
            display: block;
        }

        body {
            font-size: 1.4rem;
            background-color: #2E3033;
            color: #DEDEDE;
        }

        body a{
            color: #DEDEDE;
        }

        .leftArea {
            bottom: 0px;
            left: 0px;
            overflow: auto;
            padding-left: 0.5em;
            padding-right: 0.5em;
            position: absolute;
            right: auto;
            text-align: left;
            top: 0em;
            width: 300px;
        }

        .rightArea {
            bottom: 0px;
            left: 300px;
            overflow: auto;
            padding-left: 0.5em;
            padding-right: 0.5em;
            position: absolute;
            right: 0px;
            text-align: left;
            top: 0em;
            max-
        }
    </style>
    <title>ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ç¬”è®°.md</title>
</head>

<body>
    <main>
        <aside class="leftArea">
                <a href="https://fushaolei.github.io/imguploadtest/index.html">index.md</a>
                     <div class="menu-item">
                        <div class="menu-title">./Android</div>
                        <ul>
                                <li><a href="https://fushaolei.github.io/imguploadtest/common.html">common.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/kotlin-flesh-learn.html">kotlin-flesh-learn.md</a></li>
                        </ul>
                    </div>
                     <div class="menu-item">
                        <div class="menu-title">./Java</div>
                        <ul>
                                <li><a href="https://fushaolei.github.io/imguploadtest/section3.html">section3.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/section4.html">section4.md</a></li>
                        </ul>
                    </div>
                     <div class="menu-item">
                        <div class="menu-title">./è¯»ä¹¦ç¬”è®°</div>
                        <ul>
                                <li><a href="https://fushaolei.github.io/imguploadtest/ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹.html">ã€ŠAndroidå¼€å‘è‰ºæœ¯æ¢ç´¢ã€‹.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·â… ã€‹ç¬”è®°.html">ã€ŠJavaæ ¸å¿ƒæŠ€æœ¯å·â… ã€‹ç¬”è®°.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/ã€Šå›¾è§£HTTPã€‹ç¬”è®°.html">ã€Šå›¾è§£HTTPã€‹ç¬”è®°.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/ã€Šæ•°æ®ç»“æ„ã€‹ç¬”è®°.html">ã€Šæ•°æ®ç»“æ„ã€‹ç¬”è®°.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ç¬”è®°.html">ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ç¬”è®°.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/ã€Šè®¡ç®—æœºç½‘ç»œã€‹ç¬”è®°.html">ã€Šè®¡ç®—æœºç½‘ç»œã€‹ç¬”è®°.md</a></li>
                                <li><a href="https://fushaolei.github.io/imguploadtest/ã€Šè½¯æŠ€èƒ½ã€‹ç¬”è®°.html">ã€Šè½¯æŠ€èƒ½ã€‹ç¬”è®°.md</a></li>
                        </ul>
                    </div>
        </aside>

        <article class="rightArea">
            <h1>ã€Šç¬¬ä¸€è¡Œä»£ç ã€‹ç¬”è®°</h1>
<h2>ç¬¬ 1 ç«  å¼€å§‹å¯ç¨‹</h2>
<p>Googleäº2008å¹´æ¨å‡ºäº†Androidçš„ç¬¬ä¸€ä¸ªç‰ˆæœ¬</p>
<p>Androidç³»ç»Ÿæ¶æ„ï¼š</p>
<ul>
<li>Linuxå†…æ ¸å±‚ï¼šä¸ºAndroidè®¾å¤‡çš„å„ç§ç¡¬ä»¶æä¾›åº•å±‚çš„é©±åŠ¨</li>
<li>ç³»ç»Ÿè¿è¡Œåº“å±‚ï¼šé€šè¿‡ä¸€äº›C/C++åº“ä¸ºAndroidç³»ç»Ÿæä¾›äº†ä¸»è¦çš„ç‰¹æ€§æ”¯æŒï¼Œè¿˜æœ‰Androidè¿è¡Œæ—¶åº“</li>
<li>åº”ç”¨æ¡†æ¶å±‚ï¼šæä¾›äº†æ„å»ºåº”ç”¨ç¨‹åºæ—¶å¯èƒ½ç”¨åˆ°çš„å„ç§api</li>
<li>åº”ç”¨å±‚ï¼šåº”ç”¨å±‚åº</li>
</ul>
<p>appç›®å½•ä¸‹çš„build.gradleæ–‡ä»¶</p>
<ul>
<li>å£°æ˜æ˜¯ä¸€ä¸ªåº”ç”¨ï¼š<code>apply plugin: 'com.android.application'</code>ï¼Œå¯ä»¥ç›´æ¥å¯åŠ¨</li>
<li>å£°æ˜æ˜¯ä¸€ä¸ªåº“æ¨¡å—ï¼š<code>apply plugin: 'com.android.library'</code>ï¼Œåªèƒ½ä¾é™„åˆ«çš„åº”ç”¨ç¨‹åºæ¨¡å—æ¥è¿è¡Œ</li>
</ul>
<pre><code class="language-groovy">android {
    compileSdk 32 // æŒ‡å®šé¡¹ç›®çš„ç¼–è¯‘ç‰ˆæœ¬
    defaultConfig {
        applicationId &quot;com.fushaolei.arsenal&quot; // æ­¤åº”ç”¨çš„å”¯ä¸€æ ‡è¯†ç¬¦
        minSdk 21 // æœ€ä½å…¼å®¹çš„androidç³»ç»Ÿç‰ˆæœ¬
        targetSdk 32 // ç›®å‰ç¨³å®šç‰ˆæœ¬
        versionCode 1 // ç‰ˆæœ¬å·
        versionName &quot;1.0&quot; // ç‰ˆæœ¬å

        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;
    }

    buildTypes {
        debug {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
        release {
            minifyEnabled false // æ˜¯å¦å¼€å¯æ··æ·†
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro' // æ··æ·†æ–‡ä»¶
        }
    }
    dependencies {
        implementation fileTree(dir: 'libs', include: ['*.jar']) // æœ¬åœ°ä¾èµ–
        implementation &quot;org.jetbrains.kotlin:kotlin-stdlib-jdk7:$kotlin_version&quot;
        implementation 'androidx.appcompat:appcompat:1.1.0' // è¿œç¨‹ä¾èµ–
        implementation 'androidx.core:core-ktx:1.1.0'
        implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
        testImplementation 'junit:junit:4.12' // æµ‹è¯•ç”¨ä¾‹åº“
        androidTestImplementation 'androidx.test.ext:junit:1.1.1' // åŒæ ·æ˜¯æµ‹è¯•ç”¨ä¾‹åº“
        androidTestImplementation 'androidx.test.espresso:espresso-core:3.2.0'
    }
}
</code></pre>
<p>ä¾èµ–ï¼šä¸€èˆ¬æœ‰3ç§ä¾èµ–ï¼šæœ¬åœ°ä¾èµ–ï¼Œåº“ä¾èµ–ï¼Œè¿œç¨‹ä¾èµ–</p>
<p>æ—¥å¿—å·¥å…·Logï¼Œçº§åˆ«ä¾æ¬¡å‡é«˜</p>
<ul>
<li>vï¼ˆverboseï¼‰</li>
<li>dï¼ˆdebugï¼‰</li>
<li>iï¼ˆinfoï¼‰</li>
<li>wï¼ˆwarnï¼‰</li>
<li>eï¼ˆerrorï¼‰</li>
</ul>
<h2>ç¬¬ 2 ç«  å¿«é€Ÿå…¥é—¨ Kotlin</h2>
<blockquote>
<p>è¿™ä¸€éƒ¨åˆ†æˆ‘å¦å¤–å†™äº†ç¯‡ç¬”è®°ï¼Œæ‰€ä»¥å…³äºè¿™æœ¬ä¹¦çš„Kotlinéƒ¨åˆ†å˜ä¸å†è®°å½•äº†</p>
</blockquote>
<h2>ç¬¬ 3 ç«  Activity</h2>
<h3>ä½¿ç”¨Intentåœ¨Activityä¹‹é—´ç©¿æ¢­</h3>
<p>1.æ˜¾ç¤ºIntent</p>
<pre><code class="language-kotlin">val intent = Intent(this,SecondActivity::class.java)
startActivity(intent)
</code></pre>
<p>2.éšå¼Intent</p>
<pre><code class="language-kotlin">val intent = Intent(&quot;com.example.app.ACTION_MY&quot;)
intent.addCategory(&quot;com.example.app.CATEGORY_MY&quot;)
startActivity(intent)
</code></pre>
<p>3.å‘ä¸‹ä¸€ä¸ªActivityä¼ å‚</p>
<pre><code class="language-kotlin">val data = &quot;hello&quot;
val intent = Intent(this, SecondActivity::class.java)
intent.putExtra(&quot;data&quot;,data)
startActivity(intent)
</code></pre>
<pre><code class="language-kotlin">// æ¥æ”¶
val intent = getIntent()
val data = intent.getStringExtra(&quot;data&quot;)
println(data)
</code></pre>
<p>4.è¿”å›æ•°æ®ç»™ä¸Šä¸€ä¸ªActivity</p>
<pre><code class="language-java">Intent intent = new Intent(MainActivity.this, MainActivity2.class);
intent.putExtra(&quot;key&quot;, &quot;æˆ‘æ˜¯MainActivity,ä½ æ˜¯è°ï¼Ÿ&quot;);
startActivityForResult(intent, REQUEST_CODE);
</code></pre>
<pre><code class="language-java">protected void onActivityResult(int requestCode, int resultCode, Intent data) {
    super.onActivityResult(requestCode, resultCode, data);
    if (requestCode == REQUEST_CODE &amp;&amp; resultCode == RESULT_OK){
        String msg = data.getStringExtra(&quot;returnkey&quot;);
        Log.d(&quot;MainActivityå¾—åˆ°çš„æ•°æ®æ˜¯ï¼š&quot;, msg);
    }
}
</code></pre>
<pre><code class="language-java">Intent intent = getIntent();
intent.putExtra(&quot;returnkey&quot;,&quot;ä½ å¥½ï¼Œæˆ‘æ˜¯MainActivity 2 &quot;);
setResult(RESULT_OK,intent);
finish();
</code></pre>
<p>è¦æ³¨æ„çš„æ˜¯ï¼ŒRESULT_OKæ˜¯ç³»ç»Ÿå®šä¹‰çš„ï¼Œè¡¨ç¤ºè¿”å›æˆåŠŸï¼ŒREQUEST_CODEåˆ™æ˜¯è‡ªå·±å®šä¹‰çš„</p>
<h3>ç”Ÿå‘½å‘¨æœŸçš„ç†è§£</h3>
<table>
<thead>
<tr>
<th>æ–¹æ³•</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>onCreate</code></td>
<td><strong>åœ¨activityç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è°ƒç”¨</strong>ï¼Œé€šå¸¸åœ¨è¿™ä¸ªæ–¹æ³•ä¸­å®Œæˆåˆå§‹åŒ–æ“ä½œï¼ˆåˆå§‹åŒ–è§†å›¾ç­‰ç­‰ï¼‰</td>
</tr>
<tr>
<td><code>onStart</code></td>
<td><strong>åœ¨activitiy is becoming visible to the useræ—¶è°ƒç”¨</strong></td>
</tr>
<tr>
<td><code>onResume</code></td>
<td><strong>åœ¨activityä¸ç”¨æˆ·äº¤äº’æ—¶è°ƒç”¨</strong>ï¼Œæ­¤æ—¶activityä½äºæ ˆé¡¶</td>
</tr>
<tr>
<td><code>onPause</code></td>
<td><strong>åœ¨å¯åŠ¨æˆ–æ¢å¤å¦ä¸€ä¸ªactiviyæ—¶è°ƒç”¨</strong></td>
</tr>
<tr>
<td><code>onStop</code></td>
<td><strong>åœ¨activityä¸å¯è§çš„æ—¶å€™è°ƒç”¨</strong>ï¼Œåªè¦ä¸å¯è§å°±ä¼šè°ƒç”¨ï¼Œæ¯”å¦‚æ‰‹æœºç†„å±çš„æ—¶å€™ï¼Œåˆ‡æ¢åˆ°å¦ä¸€ä¸ªåº”ç”¨çš„æ—¶å€™ï¼Œéƒ½ä¼šè°ƒç”¨è¿™ä¸ªæ–¹æ³•</td>
</tr>
<tr>
<td><code>onDestroy</code></td>
<td><strong>åœ¨activityè¢«é”€æ¯å‰è°ƒè°ƒç”¨</strong></td>
</tr>
<tr>
<td><code>onRestart</code></td>
<td><strong>åœ¨activiyé‡æ–°å¯åŠ¨ä¹‹å‰è°ƒç”¨</strong>ï¼Œæ¯”å¦‚ç”±A activityè·³è½¬åˆ°B activityåï¼Œåœ¨è·³è½¬å›æ¥ï¼Œå°±ä¼šè§¦å‘A activityçš„onRestartæ–¹æ³•ï¼Œæœ‰ä¸€äº›æ“ä½œæ¯”å¦‚æ¨ªç«–å±çš„è½¬å˜ä¹Ÿä¼šè§¦å‘åˆ°onRestartæ–¹æ³•ï¼Œè¿™æ—¶å€™æƒ³ä¿å­˜çŠ¶æ€çš„è¯å¯ä»¥ä½¿ç”¨onSaveInstanceStateæ–¹æ³•</td>
</tr>
</tbody>
</table>
<h3>å¯åŠ¨æ¨¡å¼</h3>
<table>
<thead>
<tr>
<th>æ¨¡å¼</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>standard</code></td>
<td><strong>é»˜è®¤çš„å¯åŠ¨æ¨¡å¼</strong>ï¼Œæ¯æ¬¡å¯åŠ¨åŒä¸€ä¸ªactivityéƒ½ä¼šåˆ›å»ºä¸€ä¸ªå®ä¾‹</td>
</tr>
<tr>
<td><code>singleTop</code></td>
<td><strong>æ ˆé¡¶å¤ç”¨æ¨¡å¼</strong>ï¼Œå¦‚æœå‘ç°è¦å¯åŠ¨çš„activiyæ­£å¤„äºæ ˆé¡¶ï¼Œå°±ç›´æ¥ä½¿ç”¨ï¼Œè€Œä¸åˆ›å»ºï¼Œä½†æ˜¯å¦‚æœä¸å¤„äºæ ˆé¡¶ï¼Œåˆ™è¿˜æ˜¯ä¼šåˆ›å»ºä¸€ä¸ªæ–°çš„å®ä¾‹</td>
</tr>
<tr>
<td><code>singleTask</code></td>
<td><strong>æ ˆå†…å¤ç”¨æ¨¡å¼</strong>ï¼Œå¦‚æœå‘ç°è¦å¯åŠ¨çš„activityåœ¨æ ˆå†…ï¼Œåˆ™ç›´æ¥ä½¿ç”¨ï¼Œå¹¶ä¸”ä½¿å¤„äºå…¶ä¸Šçš„å…¶ä»–activitiyå‡ºæ ˆï¼Œå¦‚æœè¦å¯åŠ¨çš„activityä¸åœ¨åˆ™åˆ›å»º</td>
</tr>
<tr>
<td><code>singleInstance</code></td>
<td>æŒ‡å®šä¸ºsingleInstanceæ¨¡å¼çš„activityä¼šå¯ç”¨ä¸€ä¸ªæ–°çš„è¿”å›æ ˆæ¥ç®¡ç†è¿™ä¸ªactivity</td>
</tr>
</tbody>
</table>
<h2>ç¬¬ 4 ç«  UI</h2>
<p>å¸¸ç”¨æ§ä»¶ï¼šTextView,Button,EditView,ImageView...ç­‰ç­‰</p>
<p>å¸¸è§å¸ƒå±€ï¼šLinearLayout,RelativeLayout,FrameLayout,GridLayout,TableLayout</p>
<p>ä¸‹é¢è¯¦ç»†è®²è®²ä¸‰ç§å¸¸ç”¨çš„å¸ƒå±€ï¼šLinearLayout,RelativeLayout,FrameLayout</p>
<p>LinearLayout çº¿æ€§å¸ƒå±€</p>
<p>å¯ä»¥é€šè¿‡è®¾ç½®å±æ€§<code>orientation</code>æ¥è®¾ç½®æ–¹å‘ï¼ˆverticalï¼Œhorizontalï¼‰</p>
<p>RelativeLayout ç›¸å¯¹å¸ƒå±€</p>
<p>å„ç§å±æ€§ï¼š</p>
<p>ä¸parentç›¸å¯¹çš„å±æ€§</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layout_alignParentTop</code></td>
<td>è¡¨ç¤ºwidgetçš„<strong>é¡¶éƒ¨</strong>å’ŒContainerçš„<strong>é¡¶éƒ¨</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignParentBottom</code></td>
<td>è¡¨ç¤ºwidgetçš„<strong>åº•éƒ¨</strong>å’ŒContainerçš„<strong>åº•éƒ¨</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignParentStart</code></td>
<td>è¡¨ç¤ºwidgetçš„å·¦è¾¹å’ŒContainerçš„èµ·å§‹è¾¹ç¼˜å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignParentEnd</code></td>
<td>è¡¨ç¤ºwidgetçš„<strong>å·¦è¾¹</strong>å’ŒContainerçš„ç»“æŸè¾¹ç¼˜å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignParentLeft</code></td>
<td>è¡¨ç¤ºwidgetçš„<strong>å·¦è¾¹</strong>å’ŒContainerçš„<strong>å·¦è¾¹</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignParentRight</code></td>
<td>è¡¨ç¤ºwidgetçš„<strong>å³è¾¹</strong>å’ŒContainerçš„<strong>å³è¾¹</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_centerInParent</code></td>
<td>è¡¨ç¤ºwidgetå¤„äºContainerå¹³é¢ä¸Šçš„<strong>æ­£ä¸­é—´</strong>ã€‚</td>
</tr>
<tr>
<td><code>layout_alignWithParentIfMissing</code></td>
<td>è‹¥è®¾ç½®trueï¼Œåˆ™å½“è¯¥æ§ä»¶layout_toLeftOf, layout_toRightOfç­‰æ‰¾ä¸åˆ°ç›¸å¯¹çš„å‚è€ƒwidgetæ—¶ï¼Œå°±ä»¥çˆ¶containerä¸ºå‚è€ƒã€‚</td>
</tr>
</tbody>
</table>
<p>ä¸widgetç›¸å¯¹çš„å¸ƒå±€</p>
<table>
<thead>
<tr>
<th>å±æ€§</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>layout_above</code></td>
<td>è¡¨ç¤ºè¯¥widgetä½äºå‚æ•°å€¼æ ‡è¯†çš„widgetçš„ä¸Šæ–¹ã€‚</td>
</tr>
<tr>
<td><code>layout_below</code></td>
<td>è¡¨ç¤ºè¯¥widgetä½äºå‚æ•°å€¼æ ‡è¯†çš„widgetçš„ä¸‹æ–¹ã€‚</td>
</tr>
<tr>
<td><code>layout_alignTop</code></td>
<td>è¡¨ç¤ºè¯¥widgetçš„<strong>é¡¶éƒ¨</strong>ä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„<strong>é¡¶éƒ¨</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignBottom</code></td>
<td>è¡¨ç¤ºè¯¥widgetçš„<strong>åº•éƒ¨</strong>ä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„**åº•éƒ¨*8å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignStart</code></td>
<td>è¡¨ç¤ºè¯¥widgetçš„<strong>èµ·å§‹è¾¹ç¼˜</strong>ä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„<strong>èµ·å§‹è¾¹ç¼˜</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignEnd</code></td>
<td>è¡¨ç¤ºè¯¥widgetçš„<strong>ç»“æŸè¾¹ç¼˜</strong>ä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„<strong>ç»“æŸè¾¹ç¼˜</strong>å¯¹é½</td>
</tr>
<tr>
<td><code>layout_alignLeft</code></td>
<td>è¡¨ç¤ºè¯¥widgetçš„<strong>å·¦è¾¹</strong>ä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„<strong>å·¦è¾¹</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_alignRight</code></td>
<td>è¡¨ç¤ºè¯¥widgetçš„<strong>å³è¾¹</strong>å‚æ•°å€¼æ ‡è¯†çš„widgetçš„<strong>å³è¾¹</strong>å¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_centerHorizontal</code></td>
<td>è¡¨ç¤ºwidgetå¤„äºContainer<strong>æ°´å¹³æ–¹å‘ä¸Šçš„ä¸­é—´</strong>ã€‚</td>
</tr>
<tr>
<td><code>layout_centerVertical</code></td>
<td>è¡¨ç¤ºwidgetå¤„äºContainer<strong>å‚ç›´æ–¹å‘ä¸Šçš„ä¸­é—´</strong>ã€‚</td>
</tr>
<tr>
<td><code>layout_alignBaseline</code></td>
<td>è¡¨ç¤ºè¯¥widgetçš„BaseLineä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„BaseLineå¯¹é½ã€‚</td>
</tr>
<tr>
<td><code>layout_toLeftOf</code></td>
<td>è¡¨ç¤ºè¯¥widget<strong>ä½äºå‚æ•°å€¼æ ‡è¯†çš„widgetçš„å·¦æ–¹</strong>ã€‚</td>
</tr>
<tr>
<td><code>layout_toRightOf</code></td>
<td>è¡¨ç¤ºè¯¥widget<strong>ä½äºå‚æ•°å€¼æ ‡è¯†çš„widgetçš„å³æ–¹</strong>ã€‚</td>
</tr>
<tr>
<td><code>layout_toStartOf</code></td>
<td>ğŸš©è¡¨ç¤ºè¯¥widget<strong>ç»“æŸè¾¹ç¼˜</strong>ä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„<strong>èµ·å§‹è¾¹ç¼˜</strong>å¯¹é½</td>
</tr>
<tr>
<td><code>layout_toEndOf</code></td>
<td>ğŸš©è¡¨ç¤ºè¯¥widget<strong>èµ·å§‹è¾¹ç¼˜</strong>ä¸å‚æ•°å€¼æ ‡è¯†çš„widgetçš„<strong>ç»“æŸè¾¹ç¼˜</strong>å¯¹é½</td>
</tr>
</tbody>
</table>
<p>FrameLayout å¸§å¸ƒå±€ï¼šFrameLayoutä¼šé»˜è®¤æŠŠæ§ä»¶éƒ½æ”¾äºå·¦ä¸Šè§’</p>
<h2>ç¬¬ 5 ç«  Fragment</h2>
<h3>ç”Ÿå‘½å‘¨æœŸ</h3>
<p>fragmenté™„ç€äºactivityï¼Œå› æ­¤ï¼Œfragmentçš„ç”Ÿå‘½å‘¨æœŸå’Œactivityçš„ç”Ÿå‘½å‘¨æœŸå¯è°“æ˜¯ç´§ç´§ç›¸è¿åœ¨ä¸€èµ·ï¼Œfragmenté‡Œçš„è®¸å¤šæ–¹æ³•éƒ½æ˜¯åŸºäºactivityçš„</p>
<table>
<thead>
<tr>
<th>ç”Ÿå‘½å‘¨æœŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>onAttach</code></td>
<td><strong>åœ¨fragmentå’Œactivityå»ºç«‹å…³è”æ—¶è°ƒç”¨</strong></td>
</tr>
<tr>
<td><code>onCreate</code></td>
<td><strong>åœ¨fragmentç¬¬ä¸€æ¬¡è¢«åˆ›å»ºæ—¶è°ƒç”¨</strong></td>
</tr>
<tr>
<td><code>onCreateView</code></td>
<td><strong>åœ¨fragmentåˆ›å»ºè§†å›¾æ—¶è°ƒç”¨</strong></td>
</tr>
<tr>
<td><code>onActivityCreated</code></td>
<td><strong>åœ¨ä¸fragmentå…³è”çš„activityåˆ›å»ºå®Œæ¯•æ—¶è°ƒç”¨</strong></td>
</tr>
<tr>
<td><code>onStart</code></td>
<td><strong>åœ¨fragmentå°†è¦å±•ç¤ºç»™ç”¨æˆ·æ—¶è°ƒç”¨ (å‰ææ˜¯å…³è”çš„activityçš„onStartæ–¹æ³•å·²ç»å®Œæˆ).</strong></td>
</tr>
<tr>
<td><code>onResume</code></td>
<td>åœ¨fragmentå¯ä»¥å’Œç”¨æˆ·äº¤äº’æ—¶è°ƒç”¨(å‰ææ˜¯å…³è”çš„activityçš„onResumeæ–¹æ³•å·²ç»å®Œæˆ)</td>
</tr>
<tr>
<td><code>onPause</code></td>
<td>fragmentä¸å†ä¸ç”¨æˆ·äº¤äº’æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td><code>onStop</code></td>
<td>fragmentå¯¹ç”¨æˆ·ä¸å¯è§çš„æ—¶å€™è°ƒç”¨</td>
</tr>
<tr>
<td><code>onDestroyView</code></td>
<td>å½“ä¸fragmentå…³è”çš„è§†å›¾è¢«ç§»é™¤æ—¶è°ƒç”¨</td>
</tr>
<tr>
<td><code>onDestroy</code></td>
<td>é”€æ¯fragmentæ—¶è°ƒç”¨</td>
</tr>
<tr>
<td><code>onDetach</code></td>
<td>å½“fragmentå’Œactivityæ¥è§¦å…³è”æ—¶è°ƒç”¨</td>
</tr>
</tbody>
</table>
<h3>åŠ¨æ€åŠ è½½</h3>
<pre><code class="language-kotlin">val fragmentManager = supportFragmentManager
val transaction = fragmentManager.beginTransaction()
transaction.replace(R.id.right_framelayout,fragment)
transaction.addToBackStack(null)
transaction.commit()
</code></pre>
<h2>ç¬¬ 6 ç«  BroadcastReceiver</h2>
<p>å¹¿æ’­æ¥æ”¶è€…ï¼Œç”¨äºæ¥å—å¹¿æ’­</p>
<p>å¹¿æ’­çš„åˆ†ç±»</p>
<ul>
<li>
<p>æ ‡å‡†å¹¿æ’­ï¼šå¼‚æ­¥æ‰§è¡Œçš„å¹¿æ’­ï¼Œæ¥æ”¶è€…å‡ ä¹ä¼šåœ¨<strong>åŒä¸€æ—¶é—´</strong>æ¥æ”¶åˆ°å¹¿æ’­ï¼Œ<strong>æ•ˆç‡é«˜ï¼Œä½†æ— æ³•æˆªæ–­</strong></p>
</li>
<li>
<p>æœ‰åºå¹¿æ’­ï¼šåŒæ­¥æ‰§è¡Œè¿›è¡Œçš„å¹¿æ’­ï¼Œæ¥æ”¶è€…æ¥æ”¶åˆ°å¹¶å¤„ç†å®Œè‡ªå·±çš„é€»è¾‘ä¹‹åæ‰ä¼šç»§ç»­ä¼ é€’ï¼Œ<strong>å¯ä»¥è¿›è¡Œæˆªæ–­</strong></p>
</li>
</ul>
<p>å…·ä½“å®ç°</p>
<pre><code class="language-kotlin">val intent = Intent(&quot;è·¯å¾„&quot;)
intent.setPackage(packageName) //! ï¼ï¼
// æ— åºå¹¿æ’­
sendBroadcast(intent)
// æœ‰åºå¹¿æ’­
sendOrderedBroadcast(intent, null)
</code></pre>
<p>è¦æ³¨æ„çš„æ˜¯ï¼Œåœ¨Android 8.0 ä¹‹åï¼Œé™æ€æ³¨å†Œçš„BroadcastReceiveræ˜¯æ— æ³•æ¥æ”¶éšå¼å¹¿æ’­çš„ï¼ŒåŠ å…¥<code>intent.setPackage(packageName)</code>è¿™è¡Œä»£ç ä¹‹åä¼šå°†æ­¤å¹¿æ’­å˜æˆæ˜¾ç¤ºçš„å¹¿æ’­ï¼Œå¦åˆ™æ— æ³•æ¥æ”¶åˆ°è¿™æ¡å¹¿æ’­</p>
<p>å¹¿æ’­çš„æ³¨å†Œæ–¹å¼</p>
<p>åŠ¨æ€æ³¨å†Œ</p>
<p>é€šè¿‡ä»£ç å¯¹å¹¿æ’­è¿›è¡Œæ³¨å†Œ</p>
<pre><code class="language-kotlin">val intentFilter = IntentFilter() // å®šä¹‰ä¸€ä¸ªè¿‡æ»¤å™¨
intentFilter.addAction(&quot;è·¯å¾„&quot;)
myReciver = MyReciver()
registerReceiver(myReciver, intentFilter)//æ³¨å†Œ
...
unregisterReceiver(myReciver) // å–æ¶ˆæ³¨å†Œ
</code></pre>
<p>é™æ€æ³¨å†Œ</p>
<p>ç›´æ¥åœ¨<code>AndroidManifest</code>æ–‡ä»¶ä¸­è¿›è¡Œæ³¨å†Œ</p>
<pre><code class="language-xml">&lt;receiver
    android:name=&quot;.OrderlyReceiver&quot;
    android:enabled=&quot;true&quot;
    android:exported=&quot;true&quot;&gt;
    &lt;intent-filter&gt;
        &lt;action android:name=&quot;io.github.fourcomponent.MY_BROADCAST&quot; /&gt;
    &lt;/intent-filter&gt;
&lt;/receiver&gt;
</code></pre>
<h2>ç¬¬ 7 ç«  æ•°æ®å­˜å‚¨</h2>
<p>Androidæä¾›äº† 3 ç§å­˜å‚¨æ–¹å¼ï¼šæ–‡ä»¶å­˜å‚¨ï¼ŒSharePreferenceså­˜å‚¨ï¼Œsqliteæ•°æ®åº“å­˜å‚¨</p>
<p>æ–‡ä»¶å­˜å‚¨</p>
<pre><code class="language-kotlin">// å­˜å‚¨
val inputString = editView.text.toString()
val ouput = openFileOutput(&quot;data&quot;,Context.MODE_PRIVATE)
val writer = BufferedWriter(OutputStreamWriter(ouput))
writer.use {
    it.write(inputString)
}
// è¯»å–
val input = openFileInput(&quot;data&quot;)
val reader = BufferedReader(InputStreamReader(input))
reader.use{
    reader.forEachLine {
        println(it)
    }
}
</code></pre>
<p>SharePreferenceså­˜å‚¨</p>
<pre><code class="language-kotlin">val sp = getSharedPreferences(&quot;data&quot;, Context.MODE_PRIVATE)
// å­˜å‚¨
sp.edit().putString(&quot;name&quot;, &quot;Tom&quot;)
sp.apply()
// è¯»å–
sp.getString(&quot;name&quot;,null)
</code></pre>
<p>sqliteæ•°æ®åº“å­˜å‚¨</p>
<pre><code class="language-kotlin">// å¸®åŠ©ç±»
public class MyDatabaseHelper extends SQLiteOpenHelper {

    private String createBook = &quot;create table Book(&quot; +
            &quot;    id integer primary key autoincrement,&quot; +
            &quot;    author text,&quot; +
            &quot;    name text)&quot;;

    public MyDatabaseHelper(@Nullable Context context, @Nullable String name, @Nullable SQLiteDatabase.CursorFactory factory, int version) {
        super(context, name, factory, version);
    }

    @Override
    public void onCreate(SQLiteDatabase db) {
        db.execSQL(createBook);
        Log.e(&quot;==&gt; &quot;,&quot;åˆ›å»ºæ•°æ®åº“æˆåŠŸ&quot;);
    }
    // æ›´æ–°ï¼Œç‰ˆæœ¬å·ä¸ä¸€æ ·å°†ä¼šæ‰§è¡Œè¿™ä¸ªæ–¹æ³•
    @Override
    public void onUpgrade(SQLiteDatabase db, int oldVersion, int newVersion) {
        db.execSQL(&quot;drop table if exists Book&quot;);
        onCreate(db);
    }
}
// åˆ›å»º
MyDatabaseHelper dbHelper = new MyDatabaseHelper(this,&quot;BookStore.db&quot;,null,1);
SQLiteDatabase db = dbHelper.getWritableDatabase(); // æˆ–è€… dbHelper.getReadableDatabase();
// å¢åŠ 
db.execSQL(&quot;insert into Book(author,name) values(?,?)&quot;, new String[]{&quot;é²è¿…&quot;, &quot;ç‹‚äººæ—¥è®°&quot;});
// åˆ é™¤
db.execSQL(&quot;delete from Book where id = ?&quot;, new String[]{&quot;1&quot;});
// ä¿®æ”¹
db.execSQL(&quot;update Book set name = ? where id = ?&quot;, new String[]{&quot;ç™¾è‰å›­åˆ°ä¸‰å‘³ä¹¦å±‹&quot;, &quot;1&quot;});
// æŸ¥è¯¢
Cursor cursor = db.rawQuery(&quot;select * from Book&quot;, null);
if (cursor.moveToFirst()) {
    do {
        int id = cursor.getInt(cursor.getColumnIndex(&quot;id&quot;));
        String name = cursor.getString(cursor.getColumnIndex(&quot;name&quot;));
        String author = cursor.getString(cursor.getColumnIndex(&quot;author&quot;));
        Log.e(&quot;==&gt; &quot;, &quot;id = &quot; + id + &quot; name = &quot; + name + &quot; author = &quot; + author);
    } while (cursor.moveToNext());
}
// ä½¿ç”¨äº‹åŠ¡
db.beginTransaction();
try {
    // å„ç§æ“ä½œ
    db.setTransactionSuccessful();
} catch (Exception e) {
    e.printStackTrace();
} finally {
    db.endTransaction();
}
</code></pre>
<p>getWritableDatabaseå’ŒgetReadableDatabaseæ–¹æ³•éƒ½æ˜¯æ‰“å¼€æˆ–è€…åˆ›å»ºä¸€ä¸ªæ•°æ®åº“ï¼Œä¸åŒçš„æ˜¯ï¼Œå½“æ§ä»¶æ»¡äº†çš„æ—¶å€™ï¼ŒgetReadableDatabaseä¼šä»¥åªè¯»çš„æ–¹å¼æ‰“å¼€æ•°æ®åº“ï¼Œè€ŒgetWritableDatabaseä¼šæŠ¥é”™</p>
<h2>ç¬¬ 8 ç«  ContentProvider</h2>
<p>æƒé™é—®é¢˜ï¼š<strong>ä»Android 6.0 å¼€å§‹ï¼Œå±é™©æƒé™éœ€è¦ç”¨æˆ·æ‰‹åŠ¨æˆæƒæ‰å¯ä½¿ç”¨</strong></p>
<p>è¿™ä¸€ç« å…¶ä½™å†…å®¹æ ¹æœ¬ä¸æƒ³çœ‹ï¼Œå…ˆä¸çœ‹äº†</p>
<h2>ç¬¬ 9 ç«  å¤šåª’ä½“</h2>
<p>é€šçŸ¥çš„ä½¿ç”¨</p>
<pre><code class="language-kotlin">// åˆ›å»ºNotificationManager
val manager = getSystemService(Context.NOTIFICATION_SERVICE) as NotificationManager

// åˆ›å»ºé€šçŸ¥æ¸ é“
if (Build.VERSION.SDK_INT &gt;= Build.VERSION_CODES.O) {
    val channel = NotificationChannel(&quot;normal&quot;, &quot;Normal&quot;, NotificationManager.IMPORTANCE_DEFAULT)
    manager.createNotificationChannel(channel)
}
// è¿›è¡Œé€šçŸ¥
val intent = Intent(this, MainActivity2::class.java)
val pi = PendingIntent.getActivity(this, 0, intent, 0)

val notification = NotificationCompat.Builder(this, &quot;normal&quot;)
.setContentTitle(&quot;this is content title&quot;)
.setContentText(&quot;this is content text&quot;)
.setSmallIcon(R.drawable.ic_launcher_foreground)
.setContentIntent(pi) // è®¾ç½®ç‚¹å‡»åè§¦å‘çš„äº‹ä»¶
.setAutoCancel(true) // ç‚¹å‡»åè‡ªåŠ¨æ¶ˆå¤±
.build()
manager.notify(1, notification) // å‘é€é€šçŸ¥
</code></pre>
<p>è¿™ç« å…¶ä»–ä¹Ÿä¸æƒ³çœ‹äº†ï¼Œéƒ½æ˜¯ä¸€äº›æ¯”è¾ƒåŸºç¡€çš„ä¸œè¥¿</p>
<h2>ç¬¬ 10 ç«  Service</h2>
<p>serviceçš„ç”Ÿå‘½å‘¨æœŸ</p>
<p>serviceçš„ç”Ÿå‘½å‘¨æœŸå¯ä»¥åˆ†ä¸ºä¸¤ä¸ªç§æƒ…å†µï¼Œä¸€ç§æ˜¯ä¸ç»‘å®šç›´æ¥å¯åŠ¨ï¼Œä¸€ç§æ˜¯è¢«ç»‘å®šåå¯åŠ¨</p>
<p><strong>ä¸ç»‘å®šç›´æ¥å¯åŠ¨çš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<table>
<thead>
<tr>
<th>ç”Ÿå‘½å‘¨æœŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>onCreate</code></td>
<td>ç¬¬ä¸€æ¬¡<strong>åˆ›å»º</strong>serviceæ—¶è°ƒç”¨</td>
</tr>
<tr>
<td><code>onStartCommand</code></td>
<td>æ¯æ¬¡<strong>å¯åŠ¨</strong>serviceæ—¶è°ƒç”¨</td>
</tr>
<tr>
<td><code>onDestroy</code></td>
<td>serviceé”€æ¯æ—¶è°ƒç”¨</td>
</tr>
</tbody>
</table>
<p>è¿™é‡Œè¦æ³¨æ„ç†è§£ä¸‹<code>onCreate</code>å’Œ<code>onStartCommand</code>çš„åŒºåˆ«ï¼Œ<code>onCreate</code>æ–¹æ³•åªèƒ½åœ¨æ•´ä¸ªç”Ÿå‘½å‘¨æœŸä¸­åªèƒ½ä½¿ç”¨ä¸€æ¬¡ï¼Œè€Œ<code>onStartCommand</code>å¯ä»¥ä½¿ç”¨å¾ˆå¤šæ¬¡ï¼Œå³æ¯æ¬¡å¯åŠ¨serviceçš„æ—¶å€™éƒ½ä¼šç”¨åˆ°<code>onStartCommand</code>ï¼Œä½†ä¸æ˜¯æ¯æ¬¡éƒ½ä¼šç”¨åˆ°<code>onCreate</code>ï¼ˆå› ä¸ºå¯èƒ½ä¹‹å‰è¢«åˆ›å»ºåäº†ï¼‰</p>
<p>è¿˜æœ‰ä¸€ç‚¹è¦æ³¨æ„çš„æ—¶ï¼Œ<strong>æ¯ä¸ªserviceåªä¼šå­˜åœ¨ä¸€ä¸ªå®ä¾‹</strong></p>
<p><strong>ç»‘å®šåå¯åŠ¨çš„ç”Ÿå‘½å‘¨æœŸ</strong></p>
<table>
<thead>
<tr>
<th>ç”Ÿå‘½å‘¨æœŸ</th>
<th>è¯´æ˜</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>onCreate</code></td>
<td>ç¬¬ä¸€æ¬¡<strong>åˆ›å»º</strong>serviceæ—¶è°ƒç”¨ï¼Œå’Œä¸Šé¢çš„ä¸€æ ·ï¼Œè¿™é‡Œä¸å†èµ˜è¿°</td>
</tr>
<tr>
<td><code>onBind</code></td>
<td>ç»‘å®š</td>
</tr>
<tr>
<td><code>onDestroy</code></td>
<td>serviceé”€æ¯æ—¶è°ƒç”¨</td>
</tr>
</tbody>
</table>
<p>å…·ä½“å®ç°</p>
<pre><code class="language-kotlin">// ä¸ç»‘å®šç›´æ¥å¯åŠ¨
val intent = Intent(this, MyService::class.java)
startService(intent)// å¼€å¯service
stopService(intent)// åœæ­¢serviceï¼Œè¿™æ—¶å€™ä¼šè°ƒç”¨onDestroyæ–¹æ³•
// ç»‘å®šåå¯åŠ¨
var connnect = object : ServiceConnection {
   override fun onServiceDisconnected(name: ComponentName?) {
       TODO(&quot;Not yet implemented&quot;)
   }
   override fun onServiceConnected(name: ComponentName?, service: IBinder?) {
       // åœ¨è¿™é‡Œä¼šå¾—åˆ°ä¸€ä¸ªIBinderæ¥å£å˜é‡ï¼Œåœ¨è¿™é‡Œå¯ä»¥åšä¸€äº›activityå’Œserviceçš„äº¤äº’
   }
}
val intent = Intent(this, MyService::class.java)
bindService(intent, connnect, Context.BIND_AUTO_CREATE)
unbindService(connnect)
</code></pre>
<p>éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œä¸€ä¸ªserviceåªè¦è¢«å¯åŠ¨æˆ–è€…ç»‘å®šä¹‹åï¼Œå°±ä¼šå¤„äºè¿è¡Œçš„çŠ¶æ€ï¼Œä½†æ˜¯å¦‚æœä¸€ä¸ªserviceä¸ä»…è¢«ç»‘å®šäº†ï¼Œè€Œä¸”è¿˜è¢«å¯åŠ¨äº†ï¼Œè¿™æ—¶å€™æƒ³è¦é”€æ¯serviceå°±å¿…é¡»è°ƒç”¨<code>stopService(intent)</code>å’Œ<code>unbindService(connnect)</code>è¿™ä¸¤ä¸ªæ–¹æ³•ã€‚</p>
<h3>å¼‚æ­¥æ¶ˆæ¯å¤„ç†æœºåˆ¶</h3>
<p>ç”±4ä¸ªéƒ¨åˆ†ç»„æˆ</p>
<ul>
<li>Messageï¼šæ¶ˆæ¯ï¼Œçº¿ç¨‹ä¹‹é—´ä¼ é€’çš„æ¶ˆæ¯</li>
<li>Handlerï¼šå¤„ç†è€…ï¼Œç”¨äºå‘é€å’Œå¤„ç†æ¶ˆæ¯ï¼Œæ¶ˆæ¯æœ€ç»ˆéƒ½ä¼šä¼ é€’åˆ°handleMessage()æ–¹æ³•ä¸­å¤„ç†</li>
<li>MessageQueueï¼šæ¶ˆæ¯é˜Ÿåˆ—ï¼Œç”¨äºå­˜æ”¾æ‰€æœ‰é€šè¿‡Handlerå‘é€çš„æ¶ˆæ¯</li>
<li>Looperï¼šå°†MessageQueueé‡Œçš„æ¶ˆæ¯ä¼ é€’ç»™Handlerçš„handleMessage()æ–¹æ³•ä¸­</li>
</ul>
<p>é€»è¾‘ï¼šHandleré€šè¿‡å‘é€Messageåˆ°MessageQueueé‡Œï¼ŒLooperåˆå°†Messageä¼ é€’ç»™Handlerçš„handleMessage()æ–¹æ³•</p>
<p>// æ­¤å¤„æœ‰å¾…è€ƒç©¶</p>
<h2>ç¬¬ 15 ç«  å®æˆ˜</h2>
<h3>æ‰“apkåŒ…</h3>
<p>aabåŒ…ï¼ŒAndroid App Bundle ã€‚è¿™ä¸ªåŒ…æ˜¯ä¸“é—¨ç”¨äºä¸Šæ¶Google Playå•†åº—ç”¨çš„ï¼Œå¥½å¤„æ˜¯Google Playå¯ä»¥æ ¹æ®ç”¨æˆ·çš„æ‰‹æœºï¼Œåªä¸‹å‘å®ƒéœ€è¦çš„é‚£éƒ¨åˆ†èµ„æºæ–‡ä»¶ã€‚</p>

        </article>
    </main>
</body>